$c-bg: if($theme == 'light', $c-bg-zebra, $c-bg-low);
$c-settings-bg: if($theme == 'transp', rgba(38, 36, 33, 0.9), $c-bg-high);
$c-recording: hsl(6, 86%, 50%);
$c-recording-hover: hsl(6, 100%, if($theme == 'light', 40%, 60%));
$c-off: if($theme== 'transp', #aaa, gray);
$c-off-hover: if($theme == 'light', #444, if($theme== 'transp', #ddd, #aaa));
$c-rounds-status-bar-bg: if($theme == 'transp', hsla(0, 0%, 0%, 0.7), transparent);
$gap: max($block-gap, 16px);

.keyboard-move {
  @extend %flex-between-nowrap;
  border-bottom: 1px solid if($theme == 'light', $c-border, $c-bg-box);
  align-items: center;
  min-height: 40px;
  background: $c-bg;
  padding: 4px;
  font-size: 14px;
  font-weight: bold;
  em {
    color: $c-font-dim;
  }
}

#keyboard-input {
  @include transition;
  padding: 6px;
  border: $border;
  width: 100%;
  &.wrong {
    background: $c-bad;
    color: $c-bad-over;
  }
}

span#status-row {
  @extend %flex-between-nowrap;
  align-items: center;
  min-height: 40px;
  padding: 0 8px;
  font-size: 14px;
  font-weight: bold;
  a {
    text-align: center;
  }
}

#voice-status {
  color: $c-font-dim;
  width: 100%;
  margin: 0;
  text-align: center;
}

#voice-help-button {
  cursor: pointer;
  color: $c-off;
  margin: 4px;
  font-size: 16px;
  line-height: 28px;
  &:hover {
    color: $c-off-hover;
  }
}

#voice-settings-button {
  cursor: pointer;
  padding: 4px;
  color: $c-off;
  font-size: 18px;
  border-radius: 3px 3px 0 0;
  line-height: 28px;
  height: 40px;
  width: 48px;
  &:hover {
    color: $c-primary;
  }
  &.active {
    color: white;
    background-color: $c-primary;
  }
}

#microphone-button {
  font-family: 'lichess';
  cursor: pointer;
  margin: 4px;
  color: $c-off;
  width: 34px;
  height: 28px;
  line-height: 28px;
  font-size: 22px;
  border-width: 0 1px 0 1px;
  border-radius: 0.25em;
  border-style: solid;
  border-color: transparent;
  font-weight: bold;
  text-align: center;
  &:hover {
    color: $c-off-hover;
  }
}

#microphone-button.busy {
  font-size: 16px;
}

#microphone-button.enabled {
  color: $c-recording;
  animation: pulseBorderRed 1s;
  animation-iteration-count: infinite;
  &:hover {
    color: $c-recording-hover;
  }
}

@keyframes pulseBorderRed {
  0% {
    border-color: transparent;
  }
  50% {
    border-color: $c-recording;
  }
  100% {
    border-color: transparent;
  }
}

#voice-move {
  display: block;
  position: relative;
  background-color: $c-rounds-status-bar-bg;
  &.puz {
    border-bottom: 1px solid if($theme == 'light', $c-border, $c-bg-box);
    background: $c-bg;
  }
  border-radius: 3px 3px 0 0;
  * {
    user-select: none;
  }
}

div#voice-settings {
  position: absolute;
  z-index: 10;
  width: 100%;
  top: 40;
  left: 0;
  border-top: 2px solid $c-primary;
  border-bottom: 1px solid $c-off;
  border-radius: 3px;
  background: $c-settings-bg;
  padding-top: $gap;
  > div {
    padding: 0 $gap $gap;
  }

  .setting {
    @extend %flex-center-nowrap;

    flex: 0 0 auto;

    label {
      flex: 4 1 auto;
      cursor: pointer;
      white-space: nowrap;
    }

    .switch + label {
      margin-#{$start-direction}: 1ch;
    }

    input[type='range'] {
      cursor: pointer;
      flex: 1 4 auto;
      padding: 0;
      height: 1.6em;
      width: 100%;
      margin: 0 1ch;
    }

    .range_value {
      direction: ltr;
      width: 25%;
      //flex: 0 0 auto;
      display: block;
      text-align: left;
    }
  }

  .choices {
    display: flex;
    justify-content: space-between;
    flex-flow: row nowrap;
    align-items: center;

    .choice {
      @extend %metal, %box-radius;
      cursor: pointer;
      margin: 0 0 0 4px;
      padding: 8px 10px;
      flex: initial;
      display: inline-block;
      text-align: center;
      border: 1px;

      @if $theme-light {
        background: linear-gradient(hsl(0deg, 0%, 92%) 0%, hsl(0deg, 0%, 86%) 100%);
      } @else if $theme == 'dark' {
        background: linear-gradient(hsl(0deg, 0%, 27%) 0%, hsl(0deg, 0%, 19%) 100%);
      } @else {
        background: hsla(0deg, 0%, 50%, 0.3);
      }
      label {
        pointer-events: none;
      }
      &:not(.selected):hover {
        color: lighten($c-font, 20%);
        box-shadow: inset 0 0 1px 100px hsla(0, 0%, 100%, if($theme-light, 0.3, 0.1));
      }
    }
    .selected {
      cursor: default;
      color: white;
      background: linear-gradient(hsl(209, 79%, 58%) 0%, hsl(209, 79%, 52%) 100%);
    }
  }
}
