$mq-col2: $mq-xx-small;
$mq-col3: $mq-small;
$mq-col4: $mq-x-large;

$mq-not-col3: $mq-not-small;

@mixin lobby-app-size {
  min-height: 300px;

  @include breakpoint($mq-col2) {
    min-height: 400px;
  }

  @include breakpoint($mq-col3) {
    height: 600px;
    max-height: calc(100vh - #{$site-header-outer-height} - #{$block-gap});
  }
}

.lobby {
  grid-area: main;
  display: grid;
  grid-template-areas: 'app' 'table' 'side' 'blog' 'tv' 'puzzle' 'support' 'tours' 'leader' 'winner' 'about';
  grid-gap: $block-gap;

  &__counters {
    margin-top: $block-gap;
  }

  &__tournaments,
  &__simuls,
  &__leaderboard,
  &__winners {
    max-height: 20em;
  }

  @include breakpoint($mq-col2) {
    grid-template:
      'app     app' auto
      'side    table' auto
      'blog    blog' auto
      'tv      puzzle' auto
      'support support' auto
      'tours   tours' auto
      'leader  winner' auto
      'about   about' auto /
      1fr 1fr;

    &__support {
      display: grid;
      grid-template-columns: 1fr 1fr;
      grid-gap: 2%;
    }

    .lobby__timeline {
      max-height: none;
    }
  }

  @include breakpoint($mq-col3) {
    grid-template:
      'side   app     app' 1fr
      'table  app     app' auto
      'tv     blog    blog' auto
      'tv     support support' auto
      'tv     tours   tours' auto
      'puzzle tours   tours' auto
      'leader leader  winner' auto
      'about  about   about' auto /
      1fr 1fr 1fr;

    &__start {
      flex-flow: column;
      align-items: stretch;
      justify-content: center;
    }

    &__counters {
      margin: #{$block-gap / 3} 0 #{$block-gap / -3} 0;
    }

    &__side .lobby__timeline {
      margin-#{$start-direction}: 0 !important;
    }

    .lobby__timeline {
      contain: size;
    }
  }

  @include breakpoint($mq-col4) {
    grid-template:
      'side  app     app     table' auto
      'tv    blog    blog    puzzle' auto
      'tv    support support puzzle' auto
      'tours tours   leader  winner' auto
      'about about   about   about' auto /
      1fr 1fr 1fr 1fr;

    &__side {
      margin-top: 2em;
    }

    &__counters {
      margin: 0;
    }

    &__support {
      grid-gap: $block-gap;
    }
  }

  &__side {
    grid-area: side;
  }

  &__app,
  &__nope {
    grid-area: app;
  }

  &__table {
    grid-area: table;
  }

  &__tv {
    grid-area: tv;
  }

  &__leaderboard {
    grid-area: leader;
  }

  &__winners {
    grid-area: winner;
  }

  &__wide-winners {
    grid-area: leader / leader / leader / winner;
  }

  &__puzzle {
    grid-area: puzzle;
  }

  &__tournaments-simuls {
    grid-area: tours;
  }
  &__simuls {
    margin-top: $block-gap;
  }

  &__blog {
    grid-area: blog;
  }

  &__support {
    grid-area: support;
  }

  &__about {
    grid-area: about;
  }

  &__timeline {
    grid-area: timeline;
    max-height: 200px;
  }
}
