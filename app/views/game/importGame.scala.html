@(form: Form[_])(implicit ctx: Context)
@import lidraughts.app.ui.ScalatagsTwirlForm._

@analyseHelp = {
  @if(ctx.isAnon) { <a class="blue" href="@routes.Auth.signup">@trans.youNeedAnAccountToDoThat()</a> }
}

@base.layout(
title = trans.importGame.txt(),
moreCss = cssTags("form3.css", "import.css"),
moreJs = jsTag("importer.js"),
openGraph = lidraughts.app.ui.OpenGraph(
title = "Paste PDN draughts game",
url = s"$netBaseUrl${routes.Importer.importGame.url}",
description = "When pasting a game PDN, you get a browsable replay, a computer analysis, a game chat and a sharable URL").some) {
<div id="import_game" class="content_box">
  <h1 data-icon="/" class="title"> @trans.importGame()</h1>
  <p class="explanation">@trans.importGameExplanation()</p>
  <form class="form3 import" action="@routes.Importer.sendGame()" method="post">
    @form3.group(form("pdn"), trans.pasteThePdnStringHere.frag())(form3.textarea(_)())
    @form("pdn").value.map { pdn =>
      @lidraughts.importer.ImportData(pdn, none).preprocess(none).fold(
      err => Html(s"""<div class="error">${err.toList mkString "\n"}</div>""").some,
      _ => none
      )
    }
    @form3.group(form("pdnFile"), raw("Or upload a PDN file"), klass = "upload") { f =>
    @form3.file.pdn(f.name)
    }
    @form3.checkbox(form("analyse"), trans.requestAComputerAnalysis.frag(), help = Some(analyseHelp), disabled = ctx.isAnon)
    @form3.action(form3.submit(trans.importGame.frag()))
  </form>
</div>
}.toHtml
