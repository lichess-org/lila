@(form: Form[_], reqUser: Option[User] = None, captcha: lidraughts.common.Captcha)(implicit ctx: Context)

@import lidraughts.report.Reason

@title = @{ trans.reportAUser.txt() }

@base.layout(title = title, moreCss = cssTag("report.css")) {
<div class="content_box" id="report">
  <h1>@title</h1>
  <form class="create" action="@routes.Report.create()@reqUser.map(u => "?username=" + u.username)" method="post">
    <label class="field_to">
      <span>@trans.user()</span>
      @reqUser.map { user =>
      @userLink(user)
      <input
      type="hidden"
      name="@form("username").name"
      value="@user.id">
      }.getOrElse {
      <input
      type="text"
      class="user-autocomplete"
      required="required"
      name="@form("username").name"
      id="@form("username").id"
      value="@form("username").value">
      @errMsg(form("username"))
      }
    </label>
    <label class="field_reason">
      <span>@trans.reason()</span>
      @base.form.select(form("reason"), translatedReasonChoices, trans.whatIsIheMatter.txt().some)
      @errMsg(form("reason"))
    </label>
    <label class="field_body">
      <span>@trans.description()</span>
      <div>
        <textarea
          name="@form("text").name"
          required="required"
          id="@form("text").id">@form("text").value</textarea>
        <p class="help">
          @trans.reportDescriptionHelp()
        </p>
        @errMsg(form("text"))
      </div>
    </label>
    @base.captcha(form, captcha)
    @globalError(form)
    <div class="actions">
      <input class="send button" type="submit" value="@trans.send()" />
      <a class="cancel" href="@routes.Lobby.home()">@trans.cancel()</a>
    </div>
  </form>
</div>
}
