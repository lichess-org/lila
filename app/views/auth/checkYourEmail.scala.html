@(userEmail: Option[lila.security.EmailConfirm.UserEmail], form: Option[Form[_]] = None)(implicit ctx: Context)

@base.layout(
title = "Check your email",
moreCss = responsiveCssTag("email-confirm")
) {
<main class="page-small box box-pad email-confirm @if(form.exists(_.hasErrors)){error}else{anim}">
  <h1 class="is-green text" data-icon="E">@trans.checkYourEmail()</h1>
  <p>@trans.weHaveSentYouAnEmailClickTheLink()</p>
  <h2>Not receiving it?</h2>
  <ol>
    <li>
      <h3>@trans.ifYouDoNotSeeTheEmailCheckOtherPlaces()</h3>
    </li>
    @userEmail.map(_.email).map { email =>
    <li>
      <h3>Make sure your email address is correct:</h3>
      <br /><br />
      <form action="@routes.Auth.fixEmail" method="POST">
        <input
        id="new_email"
        type="email"
        required="required"
        name="email"
        value="@form.flatMap(_("email").value).getOrElse(email.value)"
        pattern="^((?!^@{email.value}$).)*$" />
        <script>
          var email = document.getElementById("new_email");
      var currentError = "This is already your current email.";
      email.setCustomValidity(currentError);
      email.addEventListener("input", function() {
        email.setCustomValidity(email.validity.patternMismatch ? currentError : "");
      });
        </script>
        <button type="submit" class="button">Change it</button>
        @form.map { f =>
        @errMsg(f("email"))
        }
      </form>
    </li>
    }
    <li>
      <h3>Wait up to 10 minutes.</h3><br />
      Depending on your email provider, it can take a while to arrive.
    </li>
    <li>
      <h3>Still not getting it?</h3><br />
      Did you make sure your email address is correct?<br />
      Did you wait 10 minutes?<br />
      If so, <a class="blue", href="@routes.Account.emailConfirmHelp">proceed to this page to solve the issue</a>.
    </li>
  </ol>
</main>
}.toHtml
