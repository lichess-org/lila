@(u: User, form: Form[_])(implicit ctx: Context)
@import lila.app.ui.ScalatagsTwirlForm._

@moreJs = {
@jsAt("javascripts/vendor/qrcode.min.js")
@jsTag("twofactor.form.js")
}

@account.layout(
title = s"${u.username} - Two-factor authentication",
active = "twofactor",
evenMoreCss = cssTag("form3.css"),
evenMoreJs = moreJs) {
<div class="content_box small_box high twofactor">
  <h1 class="lichess_title">Setup two-factor authentication</h1>
  <form class="form3" action="@routes.Account.setupTwoFactor" method="POST">
    <div class="form-group">Two-factor authentication adds another layer of security to your account.</div>
    <div class="form-group">Get an app for two-factor authentication, for example Google Authenticator for <a class="blue" href="https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2">Android</a> or <a class="blue" href="https://itunes.apple.com/app/google-authenticator/id388497605?mt=8">iOS.</a></div>
    <div class="form-group">Scan the QR code with the app.</div>
    <div style="width: 276px; height: 275px; padding: 10px; background: white; margin: 2em auto;">
      <div id="qrcode" style="width: 256px; height: 256px;"></div>
    </div>
    <div class="form-group explanation">Enter your password and the authentication code generated by the app to complete the setup. You will need an authentication code every time you log in.</div>
    @form3.hidden(form("secret"))
    @form3.password(form("passwd"), trans.password.frag()).toHtml
    @form3.group(form("token"), raw("Authentication code"))(form3.input(_)(*.pattern := "[0-9]{6}", *.autocomplete := "off"))
    @form3.globalError(form)
    @form3.action(form3.submit(raw("Enable two-factor authentication")))
  </form>
</div>
}
